---
phase: 01-color-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - _config.yml
  - _sass/custom.scss
autonomous: true
requirements:
  - TCH-01
  - TCH-02

must_haves:
  truths:
    - "Minima dark skin is disabled and the site still renders with the custom dark theme"
    - "No !important declarations remain in custom.scss"
    - "All link styles override Minima defaults without !important"
    - "The tagline uses a CSS variable instead of a hardcoded hex color"
  artifacts:
    - path: "_config.yml"
      provides: "Minima config without skin: dark"
      contains: "minima:"
    - path: "_sass/custom.scss"
      provides: "Clean specificity link styles, no !important, tagline uses var()"
  key_links:
    - from: "_sass/custom.scss"
      to: "_config.yml"
      via: "Minima skin removal changes which Sass variables are compiled, affecting specificity landscape"
      pattern: "body a"
---

<objective>
Remove technical debt that would cause specificity conflicts during the palette swap: disable Minima's competing dark skin and replace all !important declarations with higher-specificity selectors. Also convert the one hardcoded hex color (tagline) to a CSS variable reference.

Purpose: Create a clean specificity foundation so the palette swap in Plan 02 propagates correctly to every element without fighting Minima's compiled styles or !important overrides.
Output: Two files modified -- _config.yml (skin removed), _sass/custom.scss (!important removed, specificity fixed, tagline color converted)
</objective>

<execution_context>
@/home/chris/.claude/get-shit-done/workflows/execute-plan.md
@/home/chris/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-color-foundation/01-RESEARCH.md
@_config.yml
@_sass/custom.scss
</context>

<tasks>

<task type="auto">
  <name>Task 1: Disable Minima dark skin and remove !important declarations</name>
  <files>_config.yml, _sass/custom.scss</files>
  <action>
  1. In `_config.yml`, remove the `skin: dark` line from the minima settings block (line 30). The minima block should keep its other settings (social_links). Result:
     ```yaml
     minima:
       social_links:
         - { platform: linkedin, user_url: "https://www.linkedin.com/in/chr1sinfante" }
     ```

  2. In `_sass/custom.scss`, replace all 6 `!important` declarations with higher-specificity selectors. Specifically:

     a. Lines 61-71: Change the base link rules from `a, a:visited, a:active` and `a:hover` to `body a, body a:visited, body a:active` and `body a:hover`. Remove `!important` from both rules. The `body` prefix gives specificity 0,0,0,2 which beats Minima's bare `a` selector at 0,0,0,1.
        ```scss
        body a,
        body a:visited,
        body a:active {
            color: var(--text-primary);
            text-decoration: none;
            transition: color 0.15s ease;
        }

        body a:hover {
            color: var(--accent);
        }
        ```

     b. Lines 103-112: Remove `!important` from `.site-title` color (line 106) and `.site-title:hover` color (line 111). These class selectors already have higher specificity than Minima's bare `a` selector, so no prefix needed.
        ```scss
        .site-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--accent);
            text-decoration: none;
        }

        .site-title:hover {
            color: var(--text-primary);
        }
        ```

     c. Lines 143-149: There are TWO duplicate `.nav-link:hover` rules. The first (lines 143-145) has no `!important`, the second (lines 147-149) has `!important`. Remove the duplicate rule entirely (lines 147-149), keeping only the first one (lines 143-145) which already works without `!important`.

     d. Line 289: Remove `!important` from `.post-card` `text-decoration`. The class selector already has sufficient specificity.
        ```scss
        .post-card {
            /* ... existing properties ... */
            text-decoration: none;
        }
        ```

  3. In `_sass/custom.scss`, line 118: Replace the hardcoded tagline color `#9d8cc4` with `var(--text-muted)`. This brings the tagline into the token system so it updates automatically with the palette swap in Plan 02.
     ```scss
     .site-tagline {
         font-family: 'Noto Sans KR', sans-serif;
         font-size: 0.8rem;
         font-weight: 500;
         color: var(--text-muted);
         letter-spacing: 0.02em;
         opacity: 0.7;
         line-height: 1;
         margin-top: -4px;
     }
     ```

  IMPORTANT: Do NOT change any color VALUES in this task. The :root variables must keep their current purple palette values. This task is structural cleanup only.
  </action>
  <verify>
  1. Run `grep -n '!important' _sass/custom.scss` -- should return zero matches
  2. Run `grep -n '#9d8cc4' _sass/custom.scss` -- should return zero matches
  3. Run `grep -n 'skin:' _config.yml` -- should return zero matches
  4. Run `grep -n 'body a' _sass/custom.scss` -- should show the new higher-specificity selectors
  5. Run `bundle exec jekyll build` -- should succeed with no errors
  </verify>
  <done>
  - Zero !important declarations in custom.scss
  - Minima dark skin disabled in _config.yml
  - Tagline color uses var(--text-muted) instead of hardcoded #9d8cc4
  - Duplicate .nav-link:hover rule removed
  - Site builds successfully
  - All link styles use specificity-based overrides (body a prefix) instead of !important
  </done>
</task>

<task type="auto">
  <name>Task 2: Build and audit for Minima style leakage</name>
  <files>_sass/custom.scss</files>
  <action>
  After the changes from Task 1, build the site locally and inspect the output for Minima style leakage.

  1. Run `bundle exec jekyll build` and verify it completes without errors.

  2. Check the generated CSS output in `_site/assets/css/style.css` for Minima default values that may have leaked through now that the dark skin is disabled. Search for these Minima light-mode default colors that would indicate leakage:
     - `#2a7ae2` (Minima default link blue)
     - `#fdfdfd` (Minima default light background)
     - `#828282` (Minima default brand color)
     - `#111111` (Minima default text color)

  3. If any Minima light-mode colors are found in the compiled CSS output (especially for links, backgrounds, or text), add overriding rules in `_sass/custom.scss` to ensure our custom theme values take precedence. Use the existing CSS variables (e.g., `var(--text-primary)`, `var(--bg-primary)`) for any fix-up rules.

  4. Verify the compiled CSS contains our custom theme values and that `body a` selectors appear with the expected `var(--text-primary)` color.

  NOTE: Some Minima default values may appear in the compiled CSS but be overridden by our higher-specificity selectors. Only add fix-up rules if a Minima default would actually win the specificity battle.
  </action>
  <verify>
  1. `bundle exec jekyll build` completes without errors
  2. Inspect `_site/assets/css/style.css` -- our custom `body a` rules should appear and override any Minima defaults
  3. No Minima light-mode colors should be the "winning" style for any visible element
  </verify>
  <done>
  - Site builds cleanly after Minima dark skin removal
  - No Minima light-mode default colors leak through to override our custom styles
  - If any leakage was found, fix-up rules added to custom.scss
  </done>
</task>

</tasks>

<verification>
- `grep -c '!important' _sass/custom.scss` returns 0
- `grep -c '#9d8cc4' _sass/custom.scss` returns 0
- `grep 'skin:' _config.yml` returns no matches
- `bundle exec jekyll build` succeeds
- The compiled CSS in `_site/assets/css/style.css` shows body a selectors with var(--text-primary)
</verification>

<success_criteria>
- All 6 !important declarations removed and replaced with specificity-based overrides
- Minima dark skin disabled without visual regression
- Hardcoded tagline color converted to CSS variable
- Site builds and renders correctly with the current (purple) palette
- No Minima style leakage affects visible elements
</success_criteria>

<output>
After completion, create `.planning/phases/01-color-foundation/01-01-SUMMARY.md`
</output>
